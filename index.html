<!DOCTYPE html>
<html lang="中文">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">















  <link rel="alternate" href="/atom.xml" title="知秋">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://hqiwen.github.io/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />






  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "OLgpRILkJfrsQUHnazHgGRve-gzGzoHsz",
      appKey: "vuP6IIUzplnBML7dVYUiC1ES"
    });
  </script>





    <title> 知秋 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">知秋</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/categories/编程">
        <li class="mobile-menu-item">
          
          
            编程
          
        </li>
      </a>
    
      <a href="/categories/算法">
        <li class="mobile-menu-item">
          
          
            算法
          
        </li>
      </a>
    
      <a href="/categories/随笔">
        <li class="mobile-menu-item">
          
          
            随笔
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">知秋</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/编程">
            
            
              编程
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/算法">
            
            
              算法
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/随笔">
            
            
              随笔
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/05/08/typescript变量声明/">typescript变量声明</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-08
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2020/05/08/typescript变量声明/"
             data-title="typescript变量声明">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>前一章我们写了一个相加程序，可以完成数字和数字的相加，也可以完成字符串和字符串的相加，根据第一个参数，提示第二个参数的类型。如果把一个数字和字符串相加，编译器就会报错，是不是很智能呢？细心的会发现声明了一个类型：<code>type operator = string | number;</code></p>
<blockquote>
<p>type是声明一个类型的关键字，不会新建一个类型，它创建了一个新名字来引用那个类型。</p>
</blockquote>
<p>这是我们完成类型检测的关键。下面我们来系统地学习typescript类型的奥秘，其中插入ES6语法的拓展。</p>
<h2 id="声明变量let、var、const"><a href="#声明变量let、var、const" class="headerlink" title="声明变量let、var、const"></a>声明变量let、var、const</h2><h3 id="var导致的声明提升"><a href="#var导致的声明提升" class="headerlink" title="var导致的声明提升"></a>var导致的声明提升</h3><p>在ES6之前的变量声明,var的使用,看看下面的道理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(a);<span class="comment">// undefined</span></div><div class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</div><div class="line"><span class="built_in">console</span>.log(a);<span class="comment">// a = 1;</span></div><div class="line"><span class="built_in">console</span>.log(b);<span class="comment">//Uncaught ReferenceError: b is not defined,引用错误b没有被声明</span></div></pre></td></tr></table></figure>
<p>a和b打印出来的值不一样，为何？在javascript运行的过程中先会执行一遍预解析，使得变量a会被录入，但是没有执行赋值，故第一次打印a的值为undefined,赋值后打印a的值为1，变量b无声明，得到b is not defined。</p>
<h3 id="经典闭包问题的解决"><a href="#经典闭包问题的解决" class="headerlink" title="经典闭包问题的解决"></a>经典闭包问题的解决</h3><p>在JavaScript的面试中经常会碰到闭包问题，你能回答出下面的结果吗？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(i);</div><div class="line">    &#125;, <span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>答案是5个5，思考一下。<br>
          <div class="read-more">
            <a href="/2020/05/08/typescript变量声明/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2020/05/08/typescript介绍/">typescript介绍</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2020-05-08
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2020/05/08/typescript介绍/"
             data-title="typescript介绍">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>TypeScript 简单来说是一门编程语言，与你熟知的 JavaScript、Java 和 C++ 之类的编程语言一样。既然有这么多的语言可供选择，为什么又要新创建一门语言？先看看官网对 TypeScript 的描述，TypeScript 是 JavaScript 类型的超集，它可以编译成纯JavaScript。那么为什么需要使用 TypeScript 而不是 JavaScript 呢？下面我将说服你为什么要使用 TypeScript。</p>
<h2 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h2><h3 id="javaScript是一门好语言吗"><a href="#javaScript是一门好语言吗" class="headerlink" title="javaScript是一门好语言吗"></a>javaScript是一门好语言吗</h3><p>对于这个问题，不同的人有不同的想法。JavaScript 作为最多人使用的编程语言，也是在网页端取得绝对地位的语言，常常因为其动态类型、隐式转换而受到诟病。下面简要说明，一个完整的 JavaScript 包括三个不同的部分组成，核心（ESMAScript语言,简称ES），文档对象模型（DOM）和浏览器对象模型（BOM）,ESMAScript中有5种简单数据类型：undefined，null，boolean,number和string。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> result1 = (<span class="string">"55"</span> == <span class="number">55</span>);  <span class="comment">//true,因为字符串“55”被转换数值55后相等</span></div><div class="line"><span class="keyword">var</span> result2 = (<span class="string">"55"</span> === <span class="number">55</span>);   <span class="comment">//false, 因为不同的类型不相等</span></div></pre></td></tr></table></figure>
<p>这看起来令人困惑，明明差不多的操作，得到的结果却截然相反，如果由于疏忽，少写了一个等号，会得到令人检测不到的 Bug。当然，你可能精通JavaScript，不会犯这种低级错误，但是如果和你合作的某个人，你能真正地保证他不会犯这种错误吗？</p>
<h3 id="CoffeeScript的出现"><a href="#CoffeeScript的出现" class="headerlink" title="CoffeeScript的出现"></a>CoffeeScript的出现</h3><p>为了减少犯这种错误的可能性，出现了CoffeeScript。CoffeeScript是一套javaScript的转译语言，于2009 年 12 月 24 日, 提交版本 0.0.1 ，创建者 Jeremy Ashkenas 戏称它是-JavaScript 的不那么铺张的小兄弟。因为 CoffeeScript 会将类似 Ruby 语法的代码编译成 JavaScript，而且大部分结构都相似，但不同的是 CoffeeScript 拥有更严格的语法。<br>在coffeeScript中，由于操作符<strong>==</strong>常常带来不准确的约束, 不容易达到效果, 而且跟其他语言当中意思不一致, CoffeeScript 会把 == 编译为 ===, 把 != 变异为 !==. 此外, is 编译为 ===, 而 isnt 编译为 !==，这样就避免了问题。<br>随着项目的日渐拓展，代码量越来越多，有了这样的代码：<br>
          <div class="read-more">
            <a href="/2020/05/08/typescript介绍/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019/09/07/koa装饰器/">koa装饰器</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-09-07
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2019/09/07/koa装饰器/"
             data-title="koa装饰器">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>装饰器是一种特殊类型的声明，可以用来“装饰”三种类型的对象：类的属性/方法、访问器、类本身。装饰器使用<code>@expression</code>这种形式，expression求值后必须为一个函数，称为装饰器工厂函数，它会在运行时被调用，被装饰的声明信息做为参数传入。</p>
<p>注意，装饰器对类的行为的改变，是代码编译时发生的，而不是在运行时。这意味着，装饰器能在编译阶段运行代码。也就是说，装饰器本质就是编译时执行的函数<br>注意装饰器的调用顺序：</p>
<ol>
<li>参数装饰器，然后依次是方法装饰器，访问符装饰器，或属性装饰器应用到每个实例成员。</li>
<li>参数装饰器，然后依次是方法装饰器，访问符装饰器，或属性装饰器应用到每个静态成员。</li>
<li>参数装饰器应用到构造函数。</li>
<li>类装饰器应用到类。</li>
</ol>
<p>参数装饰器会在方法装饰器之前调用，对参数进行注解，外部装饰器可以拿到注解。</p>
<h2 id="解析现代koa装饰器"><a href="#解析现代koa装饰器" class="headerlink" title="解析现代koa装饰器"></a>解析现代koa装饰器</h2><p>下面来一段装饰器写法：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// CatController.ts</span></div><div class="line"><span class="keyword">import</span> &#123; Path, Get, Post, Param, Query, Body &#125; <span class="keyword">from</span> <span class="string">'koa-decorate'</span>;</div><div class="line"></div><div class="line"><span class="meta">@Path</span>(<span class="string">'/api/cat'</span>)</div><div class="line"><span class="keyword">class</span> CatController &#123;</div><div class="line"></div><div class="line">  <span class="meta">@Get</span></div><div class="line">  <span class="meta">@Path</span>(<span class="string">'/info/:type'</span>)</div><div class="line">  getCatInfo (</div><div class="line">      <span class="meta">@Param</span>(<span class="string">'type'</span>) <span class="keyword">type</span>: <span class="built_in">string</span>,</div><div class="line">      <span class="meta">@Query</span>(<span class="string">'info'</span>) info: <span class="built_in">string</span>) &#123;</div><div class="line">    <span class="keyword">return</span> &#123; <span class="keyword">type</span>, info &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="meta">@Post</span></div><div class="line">  <span class="meta">@Path</span>(<span class="string">'/info/:type'</span>)</div><div class="line">  CreateCat (</div><div class="line">      <span class="meta">@Param</span>(<span class="string">'type'</span>) <span class="keyword">type</span>: <span class="built_in">string</span>,</div><div class="line">      <span class="meta">@Body</span>(<span class="string">'requestBody'</span>) requestBody: <span class="built_in">any</span>) &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      status: <span class="number">200</span>,</div><div class="line">      data: <span class="built_in">Object</span>.assign(requestBody, &#123; <span class="keyword">type</span> &#125;),</div><div class="line">      message: <span class="string">'Created successfully...'</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> &#123; CatController &#125;;</div></pre></td></tr></table></figure>
<p>这是一段TypeScript上 koa 路由类的写法，注意到在其中，使用了@Paht @Get的写法, 并且在入参中也有<code>@PathParam(&#39;id&#39;) id: number</code>这样的写法。这就是装饰器。其中 @Path(‘/api’)中的API是这个装饰器的入参，在这里是注解，因为这个框架通过Reflect.defineMetadata将这个入参写入到了该方法中。</p>
<blockquote>
<p>Reflect.defineMetadata是一种反射的写法，保存一个对象到缓存中，通过Reflect.getMetadata来访问缓存，无需做过多操作</p>
</blockquote>
<p>思考一下该如何实现。</p>
<p>上面我们一共引入了六个装饰器<code>Path, Get, Post, Param, Query, Body</code>, 其中path既是类装饰器又是方法装饰器，get和post是方法装饰器，且装饰在path方法装饰器之上，Param, Query, Body 是属性装饰器。考虑到装饰器的执行顺序，先是属性装饰器，再是方法装饰器，然后是类装饰器。</p>
<h3 id="koa-decorate-参数装饰器"><a href="#koa-decorate-参数装饰器" class="headerlink" title="koa-decorate 参数装饰器"></a>koa-decorate 参数装饰器</h3><p>三个参数装饰器 Param, Query, Body 很简单，定义一个独一无二的<code>Symbol</code>类型的键,保存被修饰的参数的值和索引。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> paramSymbolKey = Symbol.for(<span class="string">"param"</span>);</div><div class="line"><span class="keyword">const</span> querySymbolKey = Symbol.for(<span class="string">"query"</span>);</div><div class="line"><span class="keyword">const</span> bodySymbolKey = Symbol.for(<span class="string">"body"</span>);</div><div class="line"><span class="comment">// 参数装饰器，定义一个target.propertyKey[Param]对象，并设置对象的argName = argIndex</span></div><div class="line"><span class="keyword">const</span> Param = <span class="function"><span class="params">argName</span> =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            target: <span class="built_in">Object</span>,</div><div class="line">            propertyKey: <span class="built_in">string</span> | symbol,</div><div class="line">            argIndex: <span class="built_in">number</span></div><div class="line">        ) =&gt; &#123;</div><div class="line">            <span class="comment">// 获取保存在target.propertyKey[param]的值，如果不存在，就设置一个空对象</span></div><div class="line">            <span class="keyword">const</span> args =</div><div class="line">                Reflect.getMetadata(paramSymbolKey, target, propertyKey) || &#123;&#125;;</div><div class="line">            <span class="comment">// 设置对象的argName = argIndex，键为被修饰的值，值为参数的索引</span></div><div class="line">            args[argName] = argIndex;</div><div class="line">            <span class="comment">// 设置新的target.propertyKey[param]的值</span></div><div class="line">            Reflect.defineMetadata(paramSymbolKey, args, target, propertyKey);</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div></pre></td></tr></table></figure>
<p>query 和 body 参数装饰器与 param 装饰器的内容大同小异，只不过是保存的不同的键的对象。<br>
          <div class="read-more">
            <a href="/2019/09/07/koa装饰器/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019/09/06/typescript接口/">typescript接口</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-09-06
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2019/09/06/typescript接口/"
             data-title="typescript接口">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>在计算机中，接口是计算机系统中两个独立的部件进行信息交换的共享边界。这种交换可以发生在计算机软、硬件，外部设备或进行操作的人之间，也可以是它们的结合。<br>Typescript通过类型检查的方式减少了程序犯错误的机率，但是不能约束代码的产出方式，模块暴露出的API变更之后会产生一系列的麻烦。在TypeScript里，接口的作用就是规范代码，为需要约束的类型命名和为你的代码或第三方代码定义产出方式。因为typescript认为约束条件一样时是属于同一类，所以它有时被称做“鸭式辨型法”或“结构性子类型化”。</p>
<h2 id="具名接口"><a href="#具名接口" class="headerlink" title="具名接口"></a>具名接口</h2><p>通过<code>interface</code>关键词为<strong>约束条件</strong>添加名字，主要为对象和函数添加约束，利用typescript中提到的类型：</p>
<ol>
<li>string</li>
<li>number</li>
<li>boolean</li>
<li>symbol</li>
<li>array</li>
<li>function</li>
<li>object</li>
<li>null</li>
<li>undefined</li>
<li>any</li>
<li>void</li>
<li>tuple</li>
<li>unknown</li>
<li>never</li>
<li>字面量类型</li>
</ol>
<h3 id="对象的接口"><a href="#对象的接口" class="headerlink" title="对象的接口"></a>对象的接口</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">interface</span> User&#123;</div><div class="line">    name: <span class="built_in">string</span>;</div><div class="line">    id: <span class="built_in">number</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">interface</span> Car&#123;</div><div class="line">    name: <span class="built_in">string</span>;</div><div class="line">    id: <span class="built_in">number</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> user: User = &#123;</div><div class="line">    name: <span class="string">"lily"</span>,</div><div class="line">    id: <span class="number">3</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> car: Car = &#123;</div><div class="line">    name: <span class="string">"tick"</span>,</div><div class="line">    id: <span class="number">1</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserName</span>(<span class="params">user: User</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> user.name;</div><div class="line">&#125;</div><div class="line"></div><div class="line">getUserName(car);</div></pre></td></tr></table></figure>
<p>函数getUserName限制传入参数为User类，可是我们传入了一个Car类，并且没有报错，这是为什么呢？User类的约束条件为<code>function test(obj) { return obj === {} &amp;&amp; obj.name !== undefined &amp;&amp; obj.id !== undefined;}</code>,同时Car类的约束条件也是一样的，所以函数可以传入Car类，所以typescript有时被称做“鸭式辨型法”或“结构性子类型化”。</p>
<h3 id="函数的接口"><a href="#函数的接口" class="headerlink" title="函数的接口"></a>函数的接口</h3><p>为函数添加约束条件，约束函数的传入参数和返回值，与第四章添加函数的类型检查时一样。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">interface</span> isArray&#123;</div><div class="line">    (array: []): <span class="built_in">boolean</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> isArray : isArray = <span class="function"><span class="keyword">function</span>(<span class="params">array: []</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(array) === <span class="string">'[object Array]'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="属性的约束"><a href="#属性的约束" class="headerlink" title="属性的约束"></a>属性的约束</h2><p>检查对象的属性分为必须、可选、只读，函数的参数有必须、可选之分</p>
<h3 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h3><p>有时候不确定某个属性是否存在时，在声明的属性后面加入一个<code>?</code>，就可以使属性变得可选。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">interface</span> User&#123;</div><div class="line">    name: <span class="built_in">string</span>;</div><div class="line">    id?: <span class="built_in">number</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> user: User = &#123;</div><div class="line">    name: <span class="string">"boy"</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> user1:User = &#123;</div><div class="line">    name: <span class="string">"jack"</span>,</div><div class="line">    id: <span class="number">4</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUser</span>(<span class="params">name: <span class="built_in">string</span>, id?: <span class="built_in">number</span></span>): <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        name: name,</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>检查条件为<code>function test(obj) { return (obj === {} &amp;&amp; obj.name !== undefined &amp;&amp; obj.id !== undefined;) || obj === {} &amp;&amp; obj.id !== undefined;}</code><br>
          <div class="read-more">
            <a href="/2019/09/06/typescript接口/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019/03/10/数据结构之排序/">数据结构之排序</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-03-10
        </span>
        
          <div class="post-category">
            
              <a href="/categories/算法/">算法</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2019/03/10/数据结构之排序/"
             data-title="数据结构之排序">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <p>排序就是将一组对象按照某种逻辑重新排列的过程。</p>
<h2 id="初级排序算法"><a href="#初级排序算法" class="headerlink" title="初级排序算法"></a>初级排序算法</h2><h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><p>不断重复找到最小的元素，移到相应位置。{0-N} = {0, 1, 2,..N}, {n} = swap( nums[n], min{ nums[n~nums.length] } )</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> nums = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i =<span class="number">0</span>; i&lt; nums.length; i++) &#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> j = i; j &lt; nums.length; j++) &#123;</div><div class="line">        minNum = min(minNum, nums[j]);</div><div class="line">    &#125;</div><div class="line">    swap(minNum, nums[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>有 N 次交换和N+(N-1)+..+2+1~N^2/2次比较</p>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>每次将一个数插入有序数组的适当位置。{0-N} = {0, 1, 2,..N},{n} = { nums[0~n]}.swap( less(nums[n], nums[n-1]) )</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;nums.length; i++) &#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> j = i; j &gt;<span class="number">0</span>; j--)&#123;</div><div class="line">        <span class="keyword">if</span>(num[j] &lt; nums[j<span class="number">-1</span>]) &#123;</div><div class="line">            swap(nums[j], nums[j<span class="number">-1</span>]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>插入排序所需的时间与输入的元素的初始顺序有关，最坏情况下需要N^2/2次比较和N^2/2次交换，最好需要N-1次比较和0次交换<br>
          <div class="read-more">
            <a href="/2019/03/10/数据结构之排序/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019/03/10/web服务器框架原理/">web服务器框架原理</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-03-10
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2019/03/10/web服务器框架原理/"
             data-title="web服务器框架原理">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>通过一个数组收集中间件，然后通过算法让其依次执行，平常所写的业务代码被收集起来，交给框架去最优化运行</p>
<h3 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> app = &#123;</div><div class="line">    stacks: [];</div><div class="line">&#125;;</div><div class="line"><span class="comment">//监听http请求</span></div><div class="line">app.listen = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> server = http.createServer(app.callback);</div><div class="line">    <span class="keyword">return</span> server.listen(...args);</div><div class="line">&#125;;</div><div class="line"><span class="built_in">module</span>.exports = app;</div></pre></td></tr></table></figure>
<h3 id="实例收集"><a href="#实例收集" class="headerlink" title="实例收集"></a>实例收集</h3><p>通过app.use收集要使用的中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">app.use = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> fn === <span class="string">"function"</span>)&#123;</div><div class="line">        <span class="keyword">throw</span>(<span class="string">'middleware must be a function'</span>)</div><div class="line">    &#125;</div><div class="line">    app.stacks.push(fn);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="算法与运行时"><a href="#算法与运行时" class="headerlink" title="算法与运行时"></a>算法与运行时</h3><p>数组的链式调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">app.callback = <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</div><div class="line">    dispatch(req, res, app.stacks);</div><div class="line">&#125;</div><div class="line"><span class="comment">//每当有请求传来，就调用中间件数组</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">req, res, stack</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> next = <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (err) &#123;</div><div class="line">            <span class="keyword">return</span> handleError(err, req, res, stack);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">let</span> middleware = stack.shift();</div><div class="line">        <span class="keyword">if</span> (middleware) &#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                <span class="comment">//next传递给下一个中间件，形成尾调用</span></div><div class="line">                middleware(req, res, next);</div><div class="line">            &#125; <span class="keyword">catch</span> (err) &#123;</div><div class="line">                next(err);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    next();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h3><p>中间件是一个函数，function(req, res, next),<em>req</em>是IncomingMessage对象，<em>res</em>是ServerResponse对象,next函数调用下一个中间件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> query =  <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params">options</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> opts = merge(&#123;&#125;, options);</div><div class="line">    <span class="keyword">var</span> queryparse = qs.parse;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> options === <span class="string">"function"</span>) &#123;</div><div class="line">        queryparse = options;</div><div class="line">        opts = <span class="literal">undefined</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">query</span>(<span class="params">req, res, next</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!req.query) &#123;</div><div class="line">            <span class="keyword">var</span> val = url.parse(req.url).query;</div><div class="line">            req.query = queryparse(val, opts);</div><div class="line">        &#125;</div><div class="line">        next();</div><div class="line">    &#125;;</div><div class="line">&#125;;</div><div class="line">app.use(query());</div></pre></td></tr></table></figure>
          <div class="read-more">
            <a href="/2019/03/10/web服务器框架原理/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/11/16/计算机系统构造第二期/">计算机系统构造第二期</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-16
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2018/11/16/计算机系统构造第二期/"
             data-title="计算机系统构造第二期">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <h2 id="模块化、对象和状态"><a href="#模块化、对象和状态" class="headerlink" title="模块化、对象和状态"></a>模块化、对象和状态</h2><p>我们关于世界的常规观点之一，就是将它看作聚集在一起的许多独立对象，每个对象都有自己随着时间变化的状态。所谓一个对象有<strong>状态</strong>，也就是说<strong>它的行为受到它的历史的影响</strong>。</p>
<h3 id="赋值与局部状态"><a href="#赋值与局部状态" class="headerlink" title="赋值与局部状态"></a>赋值与局部状态</h3><p>假定开始账户里有100元钱，在不断使用withdraw的过程中可以得到以下响应序列：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">withdraw(<span class="number">25</span>) <span class="comment">// 75</span></div><div class="line">withdraw(<span class="number">25</span>) <span class="comment">// 50</span></div><div class="line">withdraw(<span class="number">60</span>) <span class="comment">//余额不足</span></div></pre></td></tr></table></figure>
<p>可以看到每次执行withdraw的结果不同，我们用一个变量balance去表示账户里的现金余额</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> balance = <span class="number">100</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">withdraw</span>(<span class="params">amount</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(amount &gt; balance)&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"余额不足"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        balance -= amount;</div><div class="line">        <span class="built_in">console</span>.log(balance);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">withdraw(<span class="number">50</span>);<span class="comment">// 50</span></div><div class="line">withdraw(<span class="number">20</span>);<span class="comment">// 30</span></div><div class="line">withdraw(<span class="number">20</span>);<span class="comment">// 10</span></div><div class="line">----------------------------------</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">new_withdraw</span>(<span class="params">amount</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> balance = <span class="number">100</span>;</div><div class="line">    <span class="keyword">if</span> (amount &gt; balance) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"余额不足"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        balance -= amount;</div><div class="line">        <span class="built_in">console</span>.log(balance);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> balance;</div><div class="line">&#125;;</div><div class="line">w1 = new_withdraw(<span class="number">50</span>);<span class="comment">// 50</span></div><div class="line">w2 = new_withdraw(<span class="number">20</span>);<span class="comment">// 80</span></div><div class="line">w3 = new_withdraw(<span class="number">20</span>);<span class="comment">// 80</span></div></pre></td></tr></table></figure>
<p>可以看到w1、w2、w3是各自独立的，互不影响，与所有状态都必须显式地操作和传递额外参数的方式相比，通过引进赋值和将状态隐藏在局部变量中的技术，我们能以一种更模块化的方式构造系统。<br>
          <div class="read-more">
            <a href="/2018/11/16/计算机系统构造第二期/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/11/09/计算机系统构造/">计算机系统构造浅解第一期</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-09
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2018/11/09/计算机系统构造/"
             data-title="计算机系统构造浅解第一期">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <h2 id="程序设计的基本元素"><a href="#程序设计的基本元素" class="headerlink" title="程序设计的基本元素"></a>程序设计的基本元素</h2><ol>
<li><strong>基本表达式</strong>，用于表示语言关心的最简单个体。</li>
<li><strong>组合的方法</strong>，通过它们可以从简单的东西出发构造出符合的元素。</li>
<li><strong>抽象的方法</strong>，通过它们可以为复合对象命名，并将它们当做单元去操作。</li>
</ol>
<p>在程序设计中，我们需要处理两类要素：过程和数据。数据是一种我们希望去操作的“东西”，而过程就是有关操作这些数据的规则的描述。</p>
<h2 id="抽象过程"><a href="#抽象过程" class="headerlink" title="抽象过程"></a>抽象过程</h2><h3 id="数据参数化"><a href="#数据参数化" class="headerlink" title="数据参数化"></a>数据参数化</h3><p>如果我们要计算2的平方，你可能会这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">result = <span class="number">2</span>*<span class="number">2</span></div></pre></td></tr></table></figure>
<p>现在我们要表达一个”平方”的概念，则有如下公式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">square</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> x * x;</div><div class="line">&#125;</div><div class="line">result = square(<span class="number">2</span>);</div></pre></td></tr></table></figure>
<p>我们提出了一个复合过程<strong>平方</strong>，从只能计算2的平方到任意数的平方，差别在于给了过程一个参数，把<strong>数据参数化</strong>，可以提高抽象性和适用性，下面用平方去定义<strong>平方和</strong>的概念；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">squareSum</span>(<span class="params">x, y</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> square(x) + square(y);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          <div class="read-more">
            <a href="/2018/11/09/计算机系统构造/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/11/09/前后端渲染对比/">精读前后端渲染之争</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-09
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2018/11/09/前后端渲染对比/"
             data-title="精读前后端渲染之争">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>本文转载自<a href="https://medium.freecodecamp.com/heres-why-client-side-rendering-won-46a349fadb52" target="_blank" rel="external">Here’s why Client-side Rendering Won</a>,同时<a href="https://github.com/camsong/blog/issues/8" target="_blank" rel="external">中文翻译地址</a>，如果想获得更好的阅读体验，请阅读原文</p>
</blockquote>
<p>1 引言</p>
<p>我为什么要选这篇文章呢？</p>
<img src="/2018/11/09/前后端渲染对比/ca1b6618-2209-11e7-99ae-c2a75ad3dabb.png" alt="ca1b6618-2209-11e7-99ae-c2a75ad3dabb.png" title="">
<p>十年前，几乎所有网站都使用 ASP、Java、PHP 这类做后端渲染，但后来随着 jQuery、Angular、React、Vue 等 JS 框架的崛起，开始转向了前端渲染。从 2014 年起又开始流行了同构渲染，号称是未来，集成了前后端渲染的优点，但转眼间三年过去了，很多当时壮心满满的框架（rendr、Lazo）从先驱变成了先烈。同构到底是不是未来？自己的项目该如何选型？我想不应该只停留在追求热门和拘泥于固定模式上，忽略了前后端渲染之“争”的“核心点”，关注如何提升“用户体验”。</p>
<p>原文分析了前端渲染的优势，并没有进行深入探讨。我想以它为切入口来深入探讨一下。</p>
<p>明确三个概念：「后端渲染」指传统的 ASP、Java 或 PHP 的渲染机制；「前端渲染」指使用 JS 来渲染页面大部分内容，代表是现在流行的 SPA 单页面应用；「同构渲染」指前后端共用 JS，首次渲染时使用 Node.js 来直出 HTML。一般来说同构渲染是介于前后端中的共有部分。<br>
          <div class="read-more">
            <a href="/2018/11/09/前后端渲染对比/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/11/09/使用G2重构日历/">使用G2重构日历</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-09
        </span>
        
          <div class="post-category">
            
              <a href="/categories/编程/">编程</a>
            
          </div>
        
        
        <div class="post-visits"
             data-url="/2018/11/09/使用G2重构日历/"
             data-title="使用G2重构日历">
            阅读次数
          </div>
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        
          
        

        
          <h2 id="G2是什么"><a href="#G2是什么" class="headerlink" title="G2是什么"></a>G2是什么</h2><blockquote>
<p><a href="https://antv.alipay.com/zh-cn/g2/3.x/tutorial/index.html" target="_blank" rel="external">G2</a>是一套基于可视化编码的图形语法，以数据驱动，具有高度的易用性和扩展性，用户无需关注各种繁琐的实现细节，一条语句即可构建出各种各样的可交互的统计图表。</p>
</blockquote>
<p>简单来说G2就是一个可视化JavaScript工具库，把传进去的数据用图表表现出来，但是不同于其他图形库，G2是基于图形语法工作的</p>
<h2 id="图形语法"><a href="#图形语法" class="headerlink" title="图形语法"></a>图形语法</h2><p>图形语法描述了我们从数据到图表的映射</p>
<img src="/2018/11/09/使用G2重构日历/dataToGraph.png" alt="从数据到图形的过程" title="从数据到图形的过程">
<ol>
<li>从数据创建变量 data -&gt; variables[set]</li>
<li>对变量集进行运算,相对比与集合的运算,找到感兴趣的研究变量(cross, blend, nest)</li>
<li>对要研究的变量进行归一化，定义变量的性质(cat, time)</li>
<li>对复杂的变量进行统计,并不是所有的变量都要进行统计</li>
<li>创建几何图形 variable -&gt; graph</li>
<li>将建立的图形放到坐标系</li>
<li>对数据进行美学优化(color, point, label)</li>
<li>得到相应图形
          <div class="read-more">
            <a href="/2018/11/09/使用G2重构日历/" class="read-more-link">阅读更多</a>
          </div>
        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
    
      <a class="next" href="/page/2/">
        <span class="next-text">下一页</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:1726564970@qq.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="/qstund@gmial.com" class="iconfont icon-google" title="google"></a>
        
      
    
      
        
          <a href="https://github.com/hqiwen" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    
    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2020

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">贺启文</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
